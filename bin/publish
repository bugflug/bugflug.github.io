#!/usr/bin/env bash

cd $(dirname $0) && cd .. ; echo ''

# make sure we build first (usually)
read -n 1 -p $'build first? \n[y] yes [n] no [*] exit\n> ' ans && echo ''
case $ans in
    y|Y)
        echo ''
        ./bin/build;;
    n|N)
        echo '';;
    *)
        exit;;
esac

# swap to public branch
git checkout public
git add \
    ./assets \
    ./style \
    ./bundle \
    ./frags \
    ./pages \
    ./index.html

read -p $'commit message\n> ' ans && echo ''
git commit -m $ans
git push

# swap back to dev
git checkout main